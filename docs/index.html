<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Brisbane PTAL Explorer - Public Transport Accessibility</title>
<meta name="description" content="Interactive map showing public transport accessibility levels across Brisbane. Identify planning mismatches where excellent transit is restricted to low-rise development.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://brisbane-ptal.github.io/explorer/">
<meta property="og:title" content="Brisbane PTAL Explorer">
<meta property="og:description" content="Interactive map showing public transport accessibility levels across Brisbane. Identify planning mismatches where excellent transit is restricted to low-rise development.">
<meta property="og:image" content="https://brisbane-ptal.github.io/explorer/docs/preview.jpg">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://brisbane-ptal.github.io/explorer/">
<meta property="twitter:title" content="Brisbane PTAL Explorer">
<meta property="twitter:description" content="Interactive map showing public transport accessibility across Brisbane">
<meta property="twitter:image" content="https://brisbane-ptal.github.io/explorer/docs/preview.jpg">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
<h1>Brisbane PTAL Explorer</h1>
<p>Mapping public transport accessibility in inner Brisbane</p>
<div class="header-controls">
<div id="address-search">
<input type="text" id="address-input" placeholder="Search address (e.g. 1 Queen St, Brisbane)" autocomplete="street-address" />
<button id="search-btn" type="button">Search</button>
</div>
<button id="legend-burger" type="button" aria-label="Toggle legend">â˜°</button>
</div>
</header>

<div id="map"></div>

<div id="legend" aria-label="Legend">
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
<h3 style="margin:0;">PTAL Score</h3>
<button id="legend-toggle" type="button" aria-label="Toggle legend" style="display:none; background:none; border:none; font-size:1.2rem; cursor:pointer; color:#666;">âˆ’</button>
</div>
<div id="legend-content">
<div class="legend-row"><span class="legend-color ptal-4"></span> 4 â€“ Excellent</div>
<div class="legend-row"><span class="legend-color ptal-3"></span> 3 â€“ Good</div>
<div class="legend-row"><span class="legend-color ptal-2"></span> 2 â€“ Moderate</div>
<div class="legend-row"><span class="legend-color ptal-1"></span> 1 â€“ Poor</div>
<div class="legend-divider"></div>
<label style="display:flex; align-items:center; gap:10px; cursor:pointer; margin-bottom:8px;">
<input type="checkbox" id="mismatch-toggle" />
<span style="font-size:14px;">Show mismatches only</span>
</label>
<div style="margin-left:26px; margin-bottom:8px;">
<div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
<div style="width:18px; height:18px; border:2px solid #ff0000; background:rgba(255,255,255,0.3);"></div>
<span style="font-size:12px; color:#666;">Excellent transit but height limits prevent density</span>
</div>
<div style="display:flex; align-items:center; gap:8px;">
<div style="width:18px; height:18px; border:2px solid #9932CC; background:rgba(255,255,255,0.3);"></div>
<span style="font-size:12px; color:#666;">Poor transit does not serve allowed density</span>
</div>
</div>
</div>
</div>

<div id="info-panel" class="hidden" aria-label="Info panel">
<button id="close-panel" type="button" aria-label="Close panel">&times;</button>
<h2>PTAL Score: <span id="ptal-score"></span></h2>
<p class="category-label" id="category-label"></p>

<div style="margin-top:8px; display:flex; gap:6px; flex-wrap:wrap;">
<span id="flood-badge" style="display:none; padding:4px 10px; border-radius:6px; background:#e3f2fd; color:#0d47a1; font-size:12px; font-weight:600;">
ğŸŒŠ Flood Area
</span>
<span id="parking-badge" style="display:none; padding:4px 10px; border-radius:6px; background:#fff3cd; color:#856404; font-size:12px; font-weight:600;">
ğŸ…¿ï¸ Parking Excess
</span>
</div>

<div id="capacity-info">
<strong>Effective Capacity:</strong> <span id="total-capacity"></span>
<p style="font-size:0.85em; color:#666; margin-top:6px;">
Accounts for vehicle capacity, reliability, and route overlap
</p>
</div>

<h3>Planning Controls</h3>
<table>
<tr><td>Zone</td><td id="zone-code"></td></tr>
<tr><td>Current Maximum Height</td><td id="max-height"></td></tr>
<tr style="background:#e8f5e9;">
<td><strong>Recommended Height</strong></td>
<td><strong id="recommended-height"></strong></td>
</tr>
</table>

<div id="planning-mismatch-warning" class="mismatch-warning" style="display:none;">
<p>âš ï¸ <strong>Planning Mismatch:</strong> Excellent transit but height limits prevent density</p>
</div>

<div id="transit-gap-warning" class="mismatch-warning" style="display:none; background:#f3e5f5; border-left:4px solid #9932CC;">
<p>âš ï¸ <strong>Transit Gap:</strong> Poor transit does not serve allowed density</p>
</div>

<h3>Nearest Transport</h3>
<ul id="nearby-stops"></ul>
</div>

<footer>
<p>
<a href="https://github.com/brisbane-ptal/explorer" target="_blank" rel="noopener">About</a> |
<a href="https://github.com/brisbane-ptal/explorer/blob/main/methodology.md" target="_blank" rel="noopener">Methodology</a> |
Data: Brisbane City Council, TransLink
</p>
<div class="meta">
<span id="version"></span> Â· <span id="ptal-thresholds"></span>
</div>
<div class="disclaimer">
<strong>Note:</strong> Height controls are approximate. Grid cells may span multiple zones â€“ displayed zone represents dominant zoning. Local area overlays, character codes, and site-specific provisions may apply.
</div>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
<script src="map.js" defer></script>
</body>
</html>
